
if [[ -z "$1" ]]; then
echo "VM_ID?"
read VM
fi

echo "Name?"
read NAME
#VM=9001
DS=local
URL=https://cloud-images.ubuntu.com/focal/current/focal-server-cloudimg-amd64.img
echo
echo "Removing Old Template..."
qm destroy $VM
echo
echo "Downloading Image..."
wget -4 -O image.qcow2 $URL
echo
echo "Creating VM"
qm create $VM --memory 2048 --net0 virtio,bridge=vmbr0 --name=$NAME
echo
echo "Importing Disk.."
qm importdisk $VM image.qcow2 $DS
echo
echo "Adding Disk to VM..."
qm set $VM --scsihw virtio-scsi-pci --scsi0 $DS:$VM/vm-$VM-disk-0.raw
echo
echo "Resizing Disk"
qm resize $VM scsi0 +10G
echo
echo "Adding Cloud-Init CDROM drive, etc..."
qm set $VM --ide2 $DS:cloudinit
qm set $VM --boot c --bootdisk scsi0
qm set $VM --serial0 socket --vga serial0
echo
echo "Creating Template..."
qm template $VM
